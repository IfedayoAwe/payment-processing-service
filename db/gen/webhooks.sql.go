// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.29.0
// source: webhooks.sql

package gen

import (
	"context"
	"database/sql"
	"encoding/json"
)

const createWebhookEvent = `-- name: CreateWebhookEvent :one
INSERT INTO webhook_events (id, provider_name, event_type, provider_reference, transaction_id, payload)
VALUES (gen_random_uuid()::text, $1, $2, $3, $4, $5)
RETURNING id, provider_name, event_type, provider_reference, transaction_id, payload, processed, created_at, processed_at
`

type CreateWebhookEventParams struct {
	ProviderName      string          `db:"provider_name" json:"provider_name"`
	EventType         string          `db:"event_type" json:"event_type"`
	ProviderReference string          `db:"provider_reference" json:"provider_reference"`
	TransactionID     sql.NullString  `db:"transaction_id" json:"transaction_id"`
	Payload           json.RawMessage `db:"payload" json:"payload"`
}

func (q *Queries) CreateWebhookEvent(ctx context.Context, arg CreateWebhookEventParams) (WebhookEvent, error) {
	row := q.db.QueryRowContext(ctx, createWebhookEvent,
		arg.ProviderName,
		arg.EventType,
		arg.ProviderReference,
		arg.TransactionID,
		arg.Payload,
	)
	var i WebhookEvent
	err := row.Scan(
		&i.ID,
		&i.ProviderName,
		&i.EventType,
		&i.ProviderReference,
		&i.TransactionID,
		&i.Payload,
		&i.Processed,
		&i.CreatedAt,
		&i.ProcessedAt,
	)
	return i, err
}
